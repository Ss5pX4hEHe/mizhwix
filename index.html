<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIZHWIX SHOP - –ü—Ä–µ–º–∏—É–º –∞–∫–∫–∞—É–Ω—Ç—ã Fortnite</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800;900&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- –î–æ–±–∞–≤—å—Ç–µ Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <style>
        /* –¢–æ—Ç –∂–µ –∫—Ä–∞—Å–∏–≤—ã–π —Å—Ç–∏–ª—å —á—Ç–æ –∏ —Ä–∞–Ω—å—à–µ */
        :root {
            --primary: #ff3e7f;
            --primary-dark: #e0356e;
            --secondary: #3498db;
            --accent: #9b59b6;
            --fortnite-blue: #00b2ff;
            --fortnite-purple: #8a2be2;
            --fanpay-orange: #ff6b35;
            --dark: #1a1a2e;
            --darker: #16213e;
            --light: #ecf0f1;
            --success: #2ecc71;
            --warning: #f39c12;
            --gradient: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            --gradient-fortnite: linear-gradient(135deg, var(--fortnite-blue) 0%, var(--fortnite-purple) 100%);
            --gradient-dark: linear-gradient(135deg, var(--darker) 0%, #0f3460 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: var(--gradient-dark);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è —Ç–∞–∫–∏–º–∏ –∂–µ –∫—Ä–∞—Å–∏–≤—ã–º–∏ */
        header {
            padding: 50px 0 30px;
            position: relative;
            text-align: center;
        }

        .logo {
            font-family: 'Montserrat', sans-serif;
            font-size: 4.5rem;
            font-weight: 900;
            background: var(--gradient-fortnite);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 50px rgba(0, 178, 255, 0.5);
            animation: glow 3s infinite alternate;
            margin-bottom: 20px;
        }

        .form-container {
            background: rgba(255, 255, 255, 0.07);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 50px;
            margin: 30px auto;
            max-width: 850px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.5s ease;
        }

        .form-title {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.3rem;
            font-weight: 700;
            color: var(--light);
        }

        .form-group {
            margin-bottom: 30px;
        }

        label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--light);
        }

        input, textarea {
            width: 100%;
            padding: 18px 20px;
            border-radius: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.4);
            color: var(--light);
            font-size: 1.1rem;
            transition: all 0.4s ease;
        }

        textarea {
            min-height: 140px;
            resize: vertical;
        }

        .btn {
            display: block;
            width: 100%;
            padding: 18px;
            background: var(--gradient-fortnite);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s ease;
            margin-top: 20px;
        }

        .btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 178, 255, 0.4);
        }

        .admin-panel {
            display: none;
            margin-top: 50px;
        }

        .order-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            border-left: 8px solid var(--fortnite-blue);
        }

        .notification {
            position: fixed;
            top: 40px;
            right: 40px;
            padding: 25px 30px;
            border-radius: 15px;
            color: white;
            font-weight: 700;
            z-index: 10000;
            transform: translateX(150%);
            transition: all 0.5s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: rgba(46, 204, 113, 0.9);
        }

        .notification.error {
            background: rgba(231, 76, 60, 0.9);
        }

        @keyframes glow {
            0% { text-shadow: 0 0 20px rgba(0, 178, 255, 0.5); }
            100% { text-shadow: 0 0 40px rgba(0, 178, 255, 0.8); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1 class="logo">MIZHWIX SHOP</h1>
            <p style="font-size: 1.4rem; opacity: 0.9;">–ü—Ä–µ–º–∏—É–º –∞–∫–∫–∞—É–Ω—Ç—ã Fortnite ‚Ä¢ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö</p>
        </header>
        
        <section>
            <div class="form-container">
                <h2 class="form-title">üéÆ –§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ –∞–∫–∫–∞—É–Ω—Ç–∞</h2>
                <form id="orderForm">
                    <div class="form-group">
                        <label for="skins">üëï –°–∫–∏–Ω—ã:</label>
                        <textarea id="skins" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Renegade Raider, Galaxy, IKONIK..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="picks">‚õèÔ∏è –ö–∏—Ä–∫–∏:</label>
                        <input type="text" id="picks" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Vision, Studded Axe, Reaper..." required>
                    </div>
                    
                    <div class="form-group">
                        <label for="emotes">üíÉ –≠–º–æ—Ü–∏–∏:</label>
                        <input type="text" id="emotes" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Floss, Orange Justice, Take the L..." required>
                    </div>
                    
                    <div class="form-group">
                        <label for="additional">üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</label>
                        <textarea id="additional" placeholder="–õ—é–±–∞—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="budget">üí∞ –ë—é–¥–∂–µ—Ç (—Ä—É–±.):</label>
                        <input type="number" id="budget" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É" min="0" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="funpayNick">üë§ –ù–∏–∫ –Ω–∞ FunPay:</label>
                        <input type="text" id="funpayNick" placeholder="–í–∞—à –Ω–∏–∫ –Ω–∞ FunPay" required>
                    </div>
                    
                    <button type="submit" class="btn">üöÄ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
                </form>
            </div>
            
            <div class="form-container" id="adminLoginContainer">
                <h2 class="form-title">üîê –í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
                <div class="form-group">
                    <label for="adminPassword">üîë –ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="adminPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                </div>
                <button id="adminLogin" class="btn">üìä –í–æ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</button>
            </div>
        </section>
        
        <div class="admin-panel" id="adminPanel">
            <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 40px;">
                <h2 class="form-title">üìä –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
                <button id="logoutBtn" class="btn" style="width: auto; padding: 12px 25px; background: #e74c3c;">üö™ –í—ã–π—Ç–∏</button>
            </div>
            
            <div id="ordersList">
                <!-- –ó–∞–∫–∞–∑—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —Å Firebase -->
            </div>
        </div>
    </div>
    
    <div id="notification" class="notification">
        <span class="notification-text">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</span>
    </div>

    <script>
        // üî• –ó–ê–ú–ï–ù–ò–¢–ï –≠–¢–ò –î–ê–ù–ù–´–ï –ù–ê –í–ê–®–ò –° FIREBASE!
        const firebaseConfig = {
            apiKey: "AIzaSyC2KDK2_XHdL6Vg4VOkshojNygpzyue56Q",
            authDomain: "mizhwix-shop-5d6fc.firebaseapp.com",
            projectId: "mizhwix-shop-5d6fc",
            storageBucket: "mizhwix-shop-5d6fc.firebasestorage.app",
            messagingSenderId: "607219191901",
            appId: "1:607219191901:web:1de124fab1b6ff78823db4"
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const orderForm = document.getElementById('orderForm');
        const adminLoginContainer = document.getElementById('adminLoginContainer');
        const adminPanel = document.getElementById('adminPanel');
        const adminPassword = document.getElementById('adminPassword');
        const adminLogin = document.getElementById('adminLogin');
        const logoutBtn = document.getElementById('logoutBtn');
        const ordersList = document.getElementById('ordersList');
        const notification = document.getElementById('notification');
        
        const ADMIN_PASSWORD = '858585';

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message, type = 'success') {
            const notificationText = document.querySelector('.notification-text');
            notificationText.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞ –≤ Firebase
        orderForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = orderForm.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞...';
            submitBtn.disabled = true;

            try {
                const orderData = {
                    skins: document.getElementById('skins').value,
                    picks: document.getElementById('picks').value,
                    emotes: document.getElementById('emotes').value,
                    additional: document.getElementById('additional').value,
                    budget: document.getElementById('budget').value,
                    funpayNick: document.getElementById('funpayNick').value,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    status: 'new',
                    completed: false
                };

                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ Firebase
                await db.collection('orders').add(orderData);
                
                orderForm.reset();
                showNotification('‚úÖ –ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –í—ã —É–≤–∏–¥–∏—Ç–µ –µ–≥–æ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.');
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                showNotification('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞', 'error');
            } finally {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        });

        // –í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
        adminLogin.addEventListener('click', function() {
            if (adminPassword.value === ADMIN_PASSWORD) {
                adminLoginContainer.style.display = 'none';
                adminPanel.style.display = 'block';
                loadOrders();
                showNotification('üîì –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω! –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–∫–∞–∑—ã...');
            } else {
                showNotification('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!', 'error');
            }
        });

        // –í—ã—Ö–æ–¥ –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
        logoutBtn.addEventListener('click', function() {
            adminPanel.style.display = 'none';
            adminLoginContainer.style.display = 'block';
            showNotification('üëã –í—ã –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã');
        });

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –∏–∑ Firebase –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
        function loadOrders() {
            ordersList.innerHTML = '<div style="text-align: center; padding: 40px;">‚è≥ –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–∫–∞–∑—ã...</div>';

            // –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
            db.collection('orders')
                .orderBy('timestamp', 'desc')
                .onSnapshot(snapshot => {
                    ordersList.innerHTML = '';
                    
                    if (snapshot.empty) {
                        ordersList.innerHTML = `
                            <div class="form-container" style="text-align: center;">
                                <h3>üì≠ –ó–∞–∫–∞–∑–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h3>
                                <p>–ö–∞–∫ —Ç–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç—ã –Ω–∞—á–Ω—É—Ç –æ—Å—Ç–∞–≤–ª—è—Ç—å –∑–∞–∫–∞–∑—ã, –æ–Ω–∏ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!</p>
                            </div>
                        `;
                        return;
                    }

                    snapshot.forEach(doc => {
                        const order = doc.data();
                        const orderCard = document.createElement('div');
                        orderCard.className = 'order-card';
                        orderCard.innerHTML = `
                            <div style="display: flex; justify-content: between; margin-bottom: 20px;">
                                <strong style="color: var(--fortnite-blue); font-size: 1.3rem;">üéØ –ó–∞–∫–∞–∑ #${doc.id.slice(-6)}</strong>
                                <span style="opacity: 0.8;">üìÖ ${order.timestamp ? new Date(order.timestamp.toDate()).toLocaleString('ru-RU') : '–î–∞—Ç–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞'}</span>
                            </div>
                            <div style="margin-top: 20px;">
                                <div style="margin-bottom: 12px;"><strong>üë§ –ù–∏–∫ FunPay:</strong> ${order.funpayNick}</div>
                                <div style="margin-bottom: 12px;"><strong>üëï –°–∫–∏–Ω—ã:</strong> ${order.skins}</div>
                                <div style="margin-bottom: 12px;"><strong>‚õèÔ∏è –ö–∏—Ä–∫–∏:</strong> ${order.picks}</div>
                                <div style="margin-bottom: 12px;"><strong>üíÉ –≠–º–æ—Ü–∏–∏:</strong> ${order.emotes}</div>
                                <div style="margin-bottom: 12px;"><strong>üí∞ –ë—é–¥–∂–µ—Ç:</strong> ${order.budget} —Ä—É–±.</div>
                                <div style="margin-bottom: 12px;"><strong>üìù –î–æ–ø. –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong> ${order.additional || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</div>
                                <div style="margin-bottom: 12px;"><strong>üìä –°—Ç–∞—Ç—É—Å:</strong> 
                                    <span style="color: ${order.completed ? 'var(--success)' : 'var(--warning)'}; font-weight: 700;">
                                        ${order.completed ? '‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω' : 'üÜï –ù–æ–≤—ã–π'}
                                    </span>
                                </div>
                            </div>
                            <div style="margin-top: 25px; display: flex; gap: 15px;">
                                ${!order.completed ? 
                                    `<button onclick="completeOrder('${doc.id}')" class="btn" style="background: var(--success); width: auto; padding: 12px 25px;">
                                        ‚úÖ –í—ã–ø–æ–ª–Ω–∏—Ç—å
                                    </button>` : ''}
                                <button onclick="deleteOrder('${doc.id}')" class="btn" style="background: #e74c3c; width: auto; padding: 12px 25px;">
                                    üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                                </button>
                            </div>
                        `;
                        ordersList.appendChild(orderCard);
                    });
                }, error => {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
                    ordersList.innerHTML = '<div style="text-align: center; padding: 40px; color: #e74c3c;">‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–∫–∞–∑–æ–≤</div>';
                });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
        window.completeOrder = async function(orderId) {
            try {
                await db.collection('orders').doc(orderId).update({
                    completed: true,
                    completedAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                showNotification('‚úÖ –ó–∞–∫–∞–∑ –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–π!');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                showNotification('‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞', 'error');
            }
        };

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
        window.deleteOrder = async function(orderId) {
            if (confirm('‚ö†Ô∏è –£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∑–∞–∫–∞–∑?')) {
                try {
                    await db.collection('orders').doc(orderId).delete();
                    showNotification('üóëÔ∏è –ó–∞–∫–∞–∑ —É–¥–∞–ª–µ–Ω!');
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞:', error);
                    showNotification('‚ùå –û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞', 'error');
                }
            }
        };
    </script>
</body>
</html>
